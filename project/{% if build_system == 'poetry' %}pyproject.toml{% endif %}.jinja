[build-system]
build-backend = "poetry.core.masonry.api"
requires = [
  "poetry-core>=1",
]

[tool.poetry]
name = "{{project_slug}}"
version = "0.1.0"
description = "{{description}}"
authors = ["{{author_name}} <{{author_email}}>"]
license = "{{license}}"
homepage = "{{github_url}}"
readme = "README.md"
repository = "{{github_url}}"
documentation = "https://{{github_username}}.github.io/{{project_slug}}/"
classifiers = [
  "Development Status :: 3 - Alpha",
  "Natural Language :: English",
  "Operating System :: OS Independent",
  "Programming Language :: Python :: 3",
  "Programming Language :: Python :: 3 :: Only",
  "Programming Language :: Python :: 3.9",
  "Programming Language :: Python :: 3.10",
  "Programming Language :: Python :: 3.11",
  "Typing :: Typed",
]
include = [ "{{project_slug}}/py.typed" ]
packages = [{include = "{{project_slug}}", from = "src"}]


[tool.poetry.urls]
Documentation = "https://{{github_username}}.github.io/{{project_slug}}/"

[tool.poetry.dependencies]
python = "^3.9"

[tool.poetry.group.dev.dependencies]
pytest = "^7.2.1"
pytest-cov = "^4.0.0"
coverage-badge = "^1.1.0"
coverage[toml] = "^7.1.0"
covdefaults = "^2.2.2"
mkdocs = "^1.4.2"
mkdocs-material = "^9.0.6"
mkdocstrings = "^0.20.0"
mkdocstrings-python = "^0.8.3"
pre-commit = "^3.0.1"

[tool.poetry.group.test.dependencies]
pytest = "^7.2.1"
pytest-cov = "^4.0.0"
coverage-badge = "^1.1.0"
coverage = "^7.1.0"
covdefaults = "^2.2.2"

[tool.poetry.group.docs.dependencies]
mkdocs = "^1.4.2"
mkdocs-material = "^9.0.6"
mkdocstrings = "^0.20.0"
mkdocstrings-python = "^0.8.3"

[tool.poetry.group.lint.dependencies]
pre-commit = "^3.0.1"


[tool.isort]
profile = "black"

[tool.coverage.run]
plugins = ["covdefaults"]

[tool.coverage.report]
fail_under = 95
omit = ["noxfile.py"]

[tool.mypy]
files = [ "**/*.py" ]
ignore_missing_imports = true
strict = true
pretty = true
disallow_untyped_decorators = false
show_error_codes = true
warn_unreachable = true
enable_error_code = [ "ignore-without-code", "redundant-expr", "truthy-bool" ]

[tool.pytest.ini_options]
minversion = "7.0"
addopts = ["-ra", "--strict-markers", "--strict-config"]
xfail_strict = true
filterwarnings = ["error"]
log_cli_level = "info"
testpaths = ["tests"]
pythonpath = ["src"]

[tool.ruff]
line-length = 120
extend-select = [
  # https://github.com/charliermarsh/ruff#supported-rules
  "W",   # Pycodestyle warnings
  "UP",  # All pyupgrade rules
  "N",   # PEP8 naming
  "C90", # Complexity
  "C4",  # Flake8 comprehensions
  "ERA", # Commented out code
  "B",   # Flake8 bugbear
  "RUF", # Ruff specific rules
  "YTT", # Flake8 2020
  "ANN", # Type annotations
  "BLE", # No blind excepts
  "PT",  # Pytest style
  "RET", # Function returns
  "SIM", # Simplify
  "ARG", # Unused arguments
  "PTH", # Use pathlib over os.path
  "PGH", # Pygrep hooks
]
extend-ignore = [
  "B905",   # zip() without strict=
  "ANN101", # Missing type annotation for `self` in method
]

[tool.ruff.mccabe]
max-complexity = 15
